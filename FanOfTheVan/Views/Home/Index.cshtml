@using FanOfTheVan.Services.Models
@model MarketsViewModel
@{
    ViewData["Title"] = "Eat More Street";
}
<div class="title">
    <h3>Find street food markets near you</h3>
</div>
<div class="filters" data-url="@Url.Action("GetMarketsNearLocation")">
    Find food markets 
    <select id="openStatusSelect">
        <option value="0">open now</option>
        <option value="1" selected="selected">open today</option>
        <option value="2">open tomorrow</option>
        <option value="3">open or closed</option>
    </select>

    within
    <select id="distanceSelect">
        <option value="1">1 km</option>
        <option value="3" selected="selected">3 km</option>
        <option value="5">5 km</option>
        <option value="10">10 km</option>
    </select>
    of
    <input id="searchText" type="text" placeholder="post code" />
    <button id="searchBtn">Go!</button>
</div>


<div class="row invisible" id="results-div">
    <div id="marketsDiv" class="col-md-4 col-lg-4">
        @if (Model.Markets.Count == 0)
        {
            Html.RenderPartial("_MarketNoResults");
        }
        else
        {
            Html.RenderPartial("_MarketResults", Model.Markets);
        }
    </div>
    <div id='myMap' class="col-md-8 col-lg-8"></div>
</div>

<script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?key=AhBX1hdku8N4JQgp-V_aA5mMDhwK9Ve4RMN0dKU1_ubY9KkKvlZpSnO8ofe3dS_X&callback=loadMapScenario' async defer></script>